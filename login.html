<script>
  async function iniciarSesion() {
    const email = document.getElementById("email").value;
    const contraseña = document.getElementById("contraseña").value;

    const respuesta = await fetch("https://servicios-holisticos-backend.onrender.com/api/terapeutas/login", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ email, contraseña })
    });

    const data = await respuesta.json();

    if (respuesta.ok) {
      // ✅ Guardar el token en localStorage
      localStorage.setItem("token", data.token);

      alert("Bienvenido/a, " + data.terapeuta.nombre);

      // ✅ Redirigir a perfil.html pasando el ID por la URL
      window.location.href = `perfil.html?id=${data.terapeuta.id}`;
    } else {
      alert("Error al iniciar sesión: " + data.message);
    }
  }
</script>
